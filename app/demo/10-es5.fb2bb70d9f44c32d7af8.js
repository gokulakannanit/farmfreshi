function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,_toPropertyKey(a.key),a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:String(t)}function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"723k":function(e,t,n){"use strict";n.r(t),n.d(t,"ProfileModule",(function(){return Y}));var a,i=n("tyNb"),r=n("OG+r"),o=n("9twy"),c=n("0np6"),l=n("fXoL"),s=n("Ouoq"),b=n("0IaG"),d=n("JIr8"),g=n("z6cu"),u=n("tk/3"),f=((a=function(){function e(t){_classCallCheck(this,e),this._http=t}return _createClass(e,[{key:"update",value:function(e){return this._http.post(o.a.API_URL+"profile/update",e)}},{key:"updateImage",value:function(e){return this._http.post(o.a.API_URL+"profile/update/image",e,{reportProgress:!0,observe:"events"}).pipe(Object(d.a)(this.errorMgmt))}},{key:"errorMgmt",value:function(e){var t;return t=e.error instanceof ErrorEvent?e.error.message:"Error Code: ".concat(e.status,"\nMessage: ").concat(e.message),Object(g.a)(t)}}]),e}()).\u0275fac=function(e){return new(e||a)(l.Yb(u.a))},a.\u0275prov=l.Kb({token:a,factory:a.\u0275fac,providedIn:"root"}),a),p=n("dNgK"),m=n("znSr"),v=n("3Pt+"),h=n("ofXK"),C=n("Xa2L"),y=n("bTqV"),_=n("kmnG"),P=n("NFeN");function M(e,t){if(1&e&&l.Pb(0,"mat-progress-spinner",7),2&e){var n=l.gc();l.Db("progress_avatar ",n.size,""),l.lc("value",n.progress)}}function O(e,t){1&e&&(l.Ub(0,"button",8),l.Ub(1,"mat-icon"),l.Cc(2,"attach_file"),l.Tb(),l.Tb())}function U(e,t){if(1&e&&(l.Ub(0,"a"),l.Pb(1,"img",9),l.Tb()),2&e){var n=l.gc();l.Eb("avatar ",n.size," ",n.bg,""),l.Bb(1),l.lc("src",n.avatar,l.vc)}}function T(e,t){1&e&&l.Pb(0,"img",12)}function x(e,t){1&e&&l.Pb(0,"img",13)}function k(e,t){if(1&e&&(l.Ub(0,"a"),l.Ac(1,T,1,0,"img",10),l.Ac(2,x,1,0,"ng-template",null,11,l.Bc),l.Tb()),2&e){var n=l.rc(3),a=l.gc();l.Eb("avatar ",a.size," ",a.bg,""),l.Bb(1),l.lc("ngIf","female"===a.gender)("ngIfElse",n)}}var w,I=((w=function(){function e(t,n){_classCallCheck(this,e),this._selfService=t,this._userService=n,this.size="small",this.gender="male",this.bg="white",this.noUpload=!1}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){}},{key:"selectThumb",value:function(e){var t=this;if(e.target.files.length>0){var n=new FormData;n.append("id",this.id),n.append("avatar",e.target.files.item(0)),this._selfService.updateImage(n).pipe(o.a.takeUntil(this)).subscribe((function(e){switch(e.type){case u.c.UploadProgress:t.progress=Math.round(e.loaded/e.total*100);break;case u.c.Response:t.avatar=null;var n=t._userService.user;t.avatar=e.body.detail.avatar+"?"+new Date,+n.id==+t.id&&(n.avatar=t.avatar,t._userService.setUser(n)),t.progress=100,setTimeout((function(){t.progress=0}),100)}}))}}}]),e}()).\u0275fac=function(e){return new(e||w)(l.Ob(f),l.Ob(s.a))},w.\u0275cmp=l.Ib({type:w,selectors:[["profile-avatar"]],inputs:{id:"id",avatar:"avatar",size:"size",gender:"gender",bg:"bg",noUpload:"noUpload"},decls:8,vars:8,consts:[[2,"position","relative",3,"click"],["class","thumb-spinner","color","secondary","mode","determinate",3,"value","class",4,"ngIf"],["mat-mini-fab","","color","primary","class","upload_avatar_btn","type","button","mat-icon-button","","matSuffix","",4,"ngIf"],["hidden","","type","file","id","file","accept","image/*",3,"change"],["thumbInput",""],[3,"class",4,"ngIf","ngIfElse"],["dummyAvatar",""],["color","secondary","mode","determinate",1,"thumb-spinner",3,"value"],["mat-mini-fab","","color","primary","type","button","mat-icon-button","","matSuffix","",1,"upload_avatar_btn"],[3,"src"],["src","/assets/images/avatar_female.png",4,"ngIf","ngIfElse"],["maleAvatar",""],["src","/assets/images/avatar_female.png"],["src","/assets/images/avatar_male.png"]],template:function(e,t){if(1&e){var n=l.Vb();l.Ub(0,"div",0),l.cc("click",(function(){l.tc(n);var e=l.rc(4);return!t.noUpload&&e.click()})),l.Ac(1,M,1,4,"mat-progress-spinner",1),l.Ac(2,O,3,0,"button",2),l.Ub(3,"input",3,4),l.cc("change",(function(e){return t.selectThumb(e)})),l.Tb(),l.Ac(5,U,2,5,"a",5),l.Ac(6,k,4,6,"ng-template",null,6,l.Bc),l.Tb()}if(2&e){var a=l.rc(7);l.Eb("mb-5 ",t.size," ",t.bg,""),l.Bb(1),l.lc("ngIf",!t.noUpload),l.Bb(1),l.lc("ngIf",!t.noUpload),l.Bb(3),l.lc("ngIf",t.avatar)("ngIfElse",a)}},directives:[h.l,C.a,y.b,_.h,P.a],styles:["[_nghost-%COMP%]{display:inline-block}.small[_ngcontent-%COMP%]{margin-bottom:0!important}.avatar.big[_ngcontent-%COMP%]{width:120px;height:120px;border-radius:50%;-o-object-fit:fill;object-fit:fill}.mat-progress-spinner.mat-warn[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%], .mat-spinner.mat-warn[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{stroke:#6ba229!important}.progress_avatar[_ngcontent-%COMP%]{position:absolute;top:calc(50% - 50px);left:calc(50% - 50px);transform:scale(.5)}.upload_avatar_btn[_ngcontent-%COMP%]{color:#fff;position:absolute;z-index:1;top:calc(100% - 16px);left:calc(50% - 13px);width:26px;height:26px}mat-icon[_ngcontent-%COMP%]{font-size:16px!important;line-height:16px;width:16px;height:16px;margin-top:-22px}.upload[_ngcontent-%COMP%]   mat-label[_ngcontent-%COMP%]{padding-right:15px}.avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.5);vertical-align:middle;width:50px;height:50px;border-radius:50%;-o-object-fit:cover;object-fit:cover;filter:grayscale(100%)}.avatar.big[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:100px}.thumb-spinner[_ngcontent-%COMP%]{width:50px;height:50px;z-index:10}"]}),w),A=n("XiUz"),B=n("qFsG"),E=["editDialog"];function z(e,t){if(1&e&&(l.Ub(0,"mat-error"),l.Cc(1),l.Tb()),2&e){var n=l.gc(3);l.Bb(1),l.Ec("Enter valid ",n.editKey,"")}}function S(e,t){if(1&e){var n=l.Vb();l.Ub(0,"mat-form-field"),l.Ub(1,"mat-label"),l.Cc(2,"Full Name"),l.Tb(),l.Ub(3,"input",17,18),l.cc("ngModelChange",(function(e){return l.tc(n),l.gc(2).copyProfile.fullname=e})),l.Tb(),l.Ac(5,z,2,1,"mat-error",13),l.Tb()}if(2&e){var a=l.rc(4),i=l.gc(2);l.Bb(3),l.lc("ngModel",i.copyProfile.fullname),l.Bb(2),l.lc("ngIf",a.invalid&&a.touched)}}function L(e,t){1&e&&(l.Ub(0,"mat-error"),l.Cc(1,"Enter valid email"),l.Tb())}function D(e,t){if(1&e){var n=l.Vb();l.Ub(0,"mat-form-field"),l.Ub(1,"mat-label"),l.Cc(2,"Email"),l.Tb(),l.Ub(3,"input",19,20),l.cc("ngModelChange",(function(e){return l.tc(n),l.gc(2).copyProfile.email=e})),l.Tb(),l.Ac(5,L,2,0,"mat-error",13),l.Tb()}if(2&e){var a=l.rc(4),i=l.gc(2);l.Bb(3),l.lc("ngModel",i.copyProfile.email),l.Bb(2),l.lc("ngIf",a.invalid&&a.touched)}}function N(e,t){1&e&&(l.Ub(0,"mat-error"),l.Cc(1,"Enter valid Address"),l.Tb())}function j(e,t){if(1&e){var n=l.Vb();l.Ub(0,"mat-form-field"),l.Ub(1,"mat-label"),l.Cc(2,"Address"),l.Tb(),l.Ub(3,"input",21,22),l.cc("ngModelChange",(function(e){return l.tc(n),l.gc(2).copyProfile.address=e})),l.Tb(),l.Ac(5,N,2,0,"mat-error",13),l.Tb()}if(2&e){var a=l.rc(4),i=l.gc(2);l.Bb(3),l.lc("ngModel",i.copyProfile.address),l.Bb(2),l.lc("ngIf",a.invalid&&a.touched)}}function K(e,t){1&e&&(l.Ub(0,"mat-error"),l.Cc(1,"Enter valid secondary contact "),l.Tb())}function q(e,t){if(1&e){var n=l.Vb();l.Ub(0,"mat-form-field"),l.Ub(1,"mat-label"),l.Cc(2,"Secondary Contact"),l.Tb(),l.Ub(3,"input",23,24),l.cc("ngModelChange",(function(e){return l.tc(n),l.gc(2).copyProfile.secondaryContact=e})),l.Tb(),l.Ac(5,K,2,0,"mat-error",13),l.Tb()}if(2&e){var a=l.rc(4),i=l.gc(2);l.Bb(3),l.lc("ngModel",i.copyProfile.secondaryContact),l.Bb(2),l.lc("ngIf",a.invalid&&a.touched)}}function V(e,t){if(1&e&&(l.Ub(0,"p",25),l.Cc(1),l.Tb()),2&e){var n=l.gc(2);l.Bb(1),l.Dc(n.errorMsg)}}function F(e,t){1&e&&l.Pb(0,"span",26)}function G(e,t){if(1&e){var n=l.Vb();l.Ub(0,"div",10),l.Ub(1,"h3",1),l.Cc(2),l.Tb(),l.Ub(3,"form",11,12),l.cc("submit",(function(){return l.tc(n),l.gc().submit()})),l.Ac(5,S,6,2,"mat-form-field",13),l.Ac(6,D,6,2,"mat-form-field",13),l.Ac(7,j,6,2,"mat-form-field",13),l.Ac(8,q,6,2,"mat-form-field",13),l.Ac(9,V,2,1,"p",14),l.Ub(10,"button",15),l.Ac(11,F,1,0,"span",16),l.Ub(12,"span"),l.Cc(13),l.Tb(),l.Tb(),l.Tb(),l.Tb()}if(2&e){var a=l.rc(4),i=l.gc();l.Bb(2),l.Ec("Edit ",i.editKey,""),l.Bb(3),l.lc("ngIf","fullname"===i.editKey),l.Bb(1),l.lc("ngIf","email"===i.editKey),l.Bb(1),l.lc("ngIf","address"===i.editKey),l.Bb(1),l.lc("ngIf","secondaryContact"===i.editKey),l.Bb(1),l.lc("ngIf",i.errorMsg),l.Bb(1),l.lc("disabled",a.invalid||a.untouched||i.isLoading),l.Bb(1),l.lc("ngIf",i.isLoading),l.Bb(2),l.Ec("Update ",i.editKey,"")}}var J,Z,R,X=[{path:"",component:(J=function(){function e(t,n,a,i){_classCallCheck(this,e),this._userService=t,this._dialog=n,this._selfService=a,this._snackBar=i,this.isLoading=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.profile=this._userService.user,this.copyProfile=JSON.parse(JSON.stringify(this.profile))}},{key:"ngOnDestroy",value:function(){}},{key:"getValue",value:function(e,t){return""!==e?e:t}},{key:"onEdit",value:function(e){this.editKey=e,this._dialog.open(this.editDialog,{width:"380px",height:"auto",autoFocus:!1}).afterClosed().pipe(o.a.takeUntil(this)).subscribe((function(){})),setTimeout((function(){document.querySelector(".editDialog").querySelectorAll("input")[0].focus()}),100)}},{key:"submit",value:function(){var e=this;this.isLoading=!1,this.errorMsg=null,this._selfService.update(this.copyProfile).pipe(o.a.takeUntil(this)).subscribe((function(t){e.isLoading=!1,e._snackBar.open(c.b.PROFILE_UPDATE,null,{duration:2e3}),e._dialog.closeAll(),e.profile=t,e._userService.setUser(e.profile)}),(function(){e.isLoading=!1,e.errorMsg=c.a.COMMON}))}}]),e}(),J.\u0275fac=function(e){return new(e||J)(l.Ob(s.a),l.Ob(b.b),l.Ob(f),l.Ob(p.a))},J.\u0275cmp=l.Ib({type:J,selectors:[["app-profile"]],viewQuery:function(e,t){var n;1&e&&l.Ic(E,!0),2&e&&l.qc(n=l.dc())&&(t.editDialog=n.first)},decls:31,vars:6,consts:[["ngClass.lt-sm","sm",1,"mat-elevation-z2","bg-white","page-content"],[1,"p-2","bor-bt"],["novalidate","",1,"d-block","m-3","edit-form"],[1,"w-100","mb-3","text-center"],["size","big",3,"gender","id","avatar"],[1,"column",2,"margin","0 auto","background-color","var(--header-color)","border","none","color","var(--white)"],[3,"click"],["fxLayout","row wrap","fxLayoutAlign","space-around start","fxLayout.lt-sm","column","fxLayoutAlign.lt-sm","space-around center","fxLayoutGap.gt-xs","20"],[1,"column","text-center","mt-2"],["editDialog",""],[1,"editDialog"],["novalidate","",1,"mt-2","text-center",3,"submit"],["profileForm","ngForm"],[4,"ngIf"],["class","text-danger m-3",4,"ngIf"],["mat-raised-button","","color","primary",1,"mt-2",3,"disabled"],["class","spinner-grow spinner-grow-sm","role","status","aria-hidden","true",4,"ngIf"],["matInput","","required","","minlength","1","maxlength","255","name","fullname","pattern","[A-Za-z ]{1,255}",3,"ngModel","ngModelChange"],["fullname","ngModel"],["matInput","","required","","minlength","1","maxlength","255","name","email","pattern","[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}",3,"ngModel","ngModelChange"],["email","ngModel"],["matInput","","required","","minlength","1","maxlength","255","name","address","pattern","[A-Za-z 1-9,.]{1,255}",3,"ngModel","ngModelChange"],["address","ngModel"],["matInput","","required","","minlength","1","maxlength","255","name","secondaryContact","pattern","[6-9]{1}[0-9]{9}",3,"ngModel","ngModelChange"],["secondaryContact","ngModel"],[1,"text-danger","m-3"],["role","status","aria-hidden","true",1,"spinner-grow","spinner-grow-sm"]],template:function(e,t){1&e&&(l.Ub(0,"div",0),l.Ub(1,"h3",1),l.Cc(2,"My Profile"),l.Tb(),l.Ub(3,"form",2),l.Ub(4,"div",3),l.Pb(5,"profile-avatar",4),l.Ub(6,"div",5),l.Ub(7,"label"),l.Cc(8),l.Tb(),l.Ub(9,"a",6),l.cc("click",(function(){return t.onEdit("fullname")})),l.Ub(10,"mat-icon"),l.Cc(11,"edit"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(12,"div",7),l.Ub(13,"div",8),l.Ub(14,"h3"),l.Cc(15,"Email "),l.Ub(16,"a",6),l.cc("click",(function(){return t.onEdit("email")})),l.Ub(17,"mat-icon"),l.Cc(18,"edit"),l.Tb(),l.Tb(),l.Tb(),l.Ub(19,"div"),l.Cc(20),l.Tb(),l.Tb(),l.Ub(21,"div",8),l.Ub(22,"h3"),l.Cc(23,"Secondary Contact No "),l.Ub(24,"a",6),l.cc("click",(function(){return t.onEdit("secondaryContact")})),l.Ub(25,"mat-icon"),l.Cc(26,"edit"),l.Tb(),l.Tb(),l.Tb(),l.Ub(27,"div"),l.Cc(28),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ac(29,G,14,9,"ng-template",null,9,l.Bc),l.Tb()),2&e&&(l.Bb(5),l.lc("gender",t.profile.gender)("id",t.profile.id)("avatar",t.profile.avatar),l.Bb(3),l.Dc(t.profile.fullname||"No Name Given"),l.Bb(12),l.Dc(t.getValue(t.profile.email,"No email")),l.Bb(8),l.Dc(t.profile.secondaryContact||"No secondary contact"))},directives:[m.a,v.q,v.k,v.l,I,P.a,A.c,A.b,A.d,h.l,y.b,_.c,_.f,B.a,v.b,v.p,v.f,v.e,v.n,v.j,v.m,_.b],styles:["[_nghost-%COMP%]{display:block}.edit-form[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]{width:320px;border:1px solid #ccc;padding:10px}.edit-form[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;background-color:var(--header-color);color:var(--white);font-size:14px;position:relative}.edit-form[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{position:absolute;top:0;right:10px}.edit-form[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;line-height:26px;vertical-align:middle}.edit-form[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:14px!important;line-height:26px;vertical-align:middle;margin-top:-5px}.edit-form[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-block;line-height:26px;margin:0;vertical-align:middle}.sm[_ngcontent-%COMP%]   .edit-form[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block}.sm[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]{margin-top:20px}"]}),J)}],Q=((R=_createClass((function e(){_classCallCheck(this,e)}))).\u0275mod=l.Mb({type:R}),R.\u0275inj=l.Lb({factory:function(e){return new(e||R)},imports:[[i.e.forChild(X)],i.e]}),R),Y=((Z=_createClass((function e(){_classCallCheck(this,e)}))).\u0275mod=l.Mb({type:Z}),Z.\u0275inj=l.Lb({factory:function(e){return new(e||Z)},imports:[[r.a,Q]]}),Z)}}]);