(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"723k":function(t,e,n){"use strict";n.r(e),n.d(e,"ProfileModule",(function(){return J}));var i=n("tyNb"),a=n("OG+r"),o=n("9twy"),r=n("0np6"),c=n("fXoL"),l=n("Ouoq"),s=n("0IaG"),d=n("JIr8"),g=n("z6cu"),b=n("tk/3");let m=(()=>{class t{constructor(t){this._http=t}update(t){return this._http.post(o.a.API_URL+"profile/update",t)}updateImage(t){return this._http.post(o.a.API_URL+"profile/update/image",t,{reportProgress:!0,observe:"events"}).pipe(Object(d.a)(this.errorMgmt))}errorMgmt(t){let e="";return e=t.error instanceof ErrorEvent?t.error.message:`Error Code: ${t.status}\nMessage: ${t.message}`,Object(g.a)(e)}}return t.\u0275fac=function(e){return new(e||t)(c.Yb(b.a))},t.\u0275prov=c.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var p=n("dNgK"),f=n("znSr"),u=n("3Pt+"),h=n("ofXK"),v=n("Xa2L"),C=n("bTqV"),M=n("kmnG"),_=n("NFeN");function y(t,e){if(1&t&&c.Pb(0,"mat-progress-spinner",7),2&t){const t=c.gc();c.Db("progress_avatar ",t.size,""),c.lc("value",t.progress)}}function P(t,e){1&t&&(c.Ub(0,"button",8),c.Ub(1,"mat-icon"),c.Cc(2,"attach_file"),c.Tb(),c.Tb())}function U(t,e){if(1&t&&(c.Ub(0,"a"),c.Pb(1,"img",9),c.Tb()),2&t){const t=c.gc();c.Eb("avatar ",t.size," ",t.bg,""),c.Bb(1),c.lc("src",t.avatar,c.vc)}}function O(t,e){1&t&&c.Pb(0,"img",12)}function x(t,e){1&t&&c.Pb(0,"img",13)}function T(t,e){if(1&t&&(c.Ub(0,"a"),c.Ac(1,O,1,0,"img",10),c.Ac(2,x,1,0,"ng-template",null,11,c.Bc),c.Tb()),2&t){const t=c.rc(3),e=c.gc();c.Eb("avatar ",e.size," ",e.bg,""),c.Bb(1),c.lc("ngIf","female"===e.gender)("ngIfElse",t)}}let I=(()=>{class t{constructor(t,e){this._selfService=t,this._userService=e,this.size="small",this.gender="male",this.bg="white",this.noUpload=!1}ngOnInit(){}ngOnDestroy(){}selectThumb(t){if(t.target.files.length>0){var e=new FormData;e.append("id",this.id),e.append("avatar",t.target.files.item(0)),this._selfService.updateImage(e).pipe(o.a.takeUntil(this)).subscribe(t=>{switch(t.type){case b.c.UploadProgress:this.progress=Math.round(t.loaded/t.total*100);break;case b.c.Response:this.avatar=null;let e=this._userService.user;this.avatar=t.body.detail.avatar+"?"+new Date,+e.id==+this.id&&(e.avatar=this.avatar,this._userService.setUser(e)),this.progress=100,setTimeout(()=>{this.progress=0},100)}})}}}return t.\u0275fac=function(e){return new(e||t)(c.Ob(m),c.Ob(l.a))},t.\u0275cmp=c.Ib({type:t,selectors:[["profile-avatar"]],inputs:{id:"id",avatar:"avatar",size:"size",gender:"gender",bg:"bg",noUpload:"noUpload"},decls:8,vars:8,consts:[[2,"position","relative",3,"click"],["class","thumb-spinner","color","secondary","mode","determinate",3,"value","class",4,"ngIf"],["mat-mini-fab","","color","primary","class","upload_avatar_btn","type","button","mat-icon-button","","matSuffix","",4,"ngIf"],["hidden","","type","file","id","file","accept","image/*",3,"change"],["thumbInput",""],[3,"class",4,"ngIf","ngIfElse"],["dummyAvatar",""],["color","secondary","mode","determinate",1,"thumb-spinner",3,"value"],["mat-mini-fab","","color","primary","type","button","mat-icon-button","","matSuffix","",1,"upload_avatar_btn"],[3,"src"],["src","/assets/images/avatar_female.png",4,"ngIf","ngIfElse"],["maleAvatar",""],["src","/assets/images/avatar_female.png"],["src","/assets/images/avatar_male.png"]],template:function(t,e){if(1&t){const t=c.Vb();c.Ub(0,"div",0),c.cc("click",(function(){c.tc(t);const n=c.rc(4);return!e.noUpload&&n.click()})),c.Ac(1,y,1,4,"mat-progress-spinner",1),c.Ac(2,P,3,0,"button",2),c.Ub(3,"input",3,4),c.cc("change",(function(t){return e.selectThumb(t)})),c.Tb(),c.Ac(5,U,2,5,"a",5),c.Ac(6,T,4,6,"ng-template",null,6,c.Bc),c.Tb()}if(2&t){const t=c.rc(7);c.Eb("mb-5 ",e.size," ",e.bg,""),c.Bb(1),c.lc("ngIf",!e.noUpload),c.Bb(1),c.lc("ngIf",!e.noUpload),c.Bb(3),c.lc("ngIf",e.avatar)("ngIfElse",t)}},directives:[h.l,v.a,C.b,M.h,_.a],styles:["[_nghost-%COMP%]{display:inline-block}.small[_ngcontent-%COMP%]{margin-bottom:0!important}.avatar.big[_ngcontent-%COMP%]{width:120px;height:120px;border-radius:50%;-o-object-fit:fill;object-fit:fill}.mat-progress-spinner.mat-warn[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%], .mat-spinner.mat-warn[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{stroke:#6ba229!important}.progress_avatar[_ngcontent-%COMP%]{position:absolute;top:calc(50% - 50px);left:calc(50% - 50px);transform:scale(.5)}.upload_avatar_btn[_ngcontent-%COMP%]{color:#fff;position:absolute;z-index:1;top:calc(100% - 16px);left:calc(50% - 13px);width:26px;height:26px}mat-icon[_ngcontent-%COMP%]{font-size:16px!important;line-height:16px;width:16px;height:16px;margin-top:-22px}.upload[_ngcontent-%COMP%]   mat-label[_ngcontent-%COMP%]{padding-right:15px}.avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.5);vertical-align:middle;width:50px;height:50px;border-radius:50%;-o-object-fit:cover;object-fit:cover;filter:grayscale(100%)}.avatar.big[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:100px}.thumb-spinner[_ngcontent-%COMP%]{width:50px;height:50px;z-index:10}"]}),t})();var w=n("XiUz"),A=n("qFsG");const B=["editDialog"];function k(t,e){if(1&t&&(c.Ub(0,"mat-error"),c.Cc(1),c.Tb()),2&t){const t=c.gc(3);c.Bb(1),c.Ec("Enter valid ",t.editKey,"")}}function E(t,e){if(1&t){const t=c.Vb();c.Ub(0,"mat-form-field"),c.Ub(1,"mat-label"),c.Cc(2,"Full Name"),c.Tb(),c.Ub(3,"input",17,18),c.cc("ngModelChange",(function(e){return c.tc(t),c.gc(2).copyProfile.fullname=e})),c.Tb(),c.Ac(5,k,2,1,"mat-error",13),c.Tb()}if(2&t){const t=c.rc(4),e=c.gc(2);c.Bb(3),c.lc("ngModel",e.copyProfile.fullname),c.Bb(2),c.lc("ngIf",t.invalid&&t.touched)}}function z(t,e){1&t&&(c.Ub(0,"mat-error"),c.Cc(1,"Enter valid email"),c.Tb())}function S(t,e){if(1&t){const t=c.Vb();c.Ub(0,"mat-form-field"),c.Ub(1,"mat-label"),c.Cc(2,"Email"),c.Tb(),c.Ub(3,"input",19,20),c.cc("ngModelChange",(function(e){return c.tc(t),c.gc(2).copyProfile.email=e})),c.Tb(),c.Ac(5,z,2,0,"mat-error",13),c.Tb()}if(2&t){const t=c.rc(4),e=c.gc(2);c.Bb(3),c.lc("ngModel",e.copyProfile.email),c.Bb(2),c.lc("ngIf",t.invalid&&t.touched)}}function L(t,e){1&t&&(c.Ub(0,"mat-error"),c.Cc(1,"Enter valid Address"),c.Tb())}function D(t,e){if(1&t){const t=c.Vb();c.Ub(0,"mat-form-field"),c.Ub(1,"mat-label"),c.Cc(2,"Address"),c.Tb(),c.Ub(3,"input",21,22),c.cc("ngModelChange",(function(e){return c.tc(t),c.gc(2).copyProfile.address=e})),c.Tb(),c.Ac(5,L,2,0,"mat-error",13),c.Tb()}if(2&t){const t=c.rc(4),e=c.gc(2);c.Bb(3),c.lc("ngModel",e.copyProfile.address),c.Bb(2),c.lc("ngIf",t.invalid&&t.touched)}}function N(t,e){1&t&&(c.Ub(0,"mat-error"),c.Cc(1,"Enter valid secondary contact "),c.Tb())}function q(t,e){if(1&t){const t=c.Vb();c.Ub(0,"mat-form-field"),c.Ub(1,"mat-label"),c.Cc(2,"Secondary Contact"),c.Tb(),c.Ub(3,"input",23,24),c.cc("ngModelChange",(function(e){return c.tc(t),c.gc(2).copyProfile.secondaryContact=e})),c.Tb(),c.Ac(5,N,2,0,"mat-error",13),c.Tb()}if(2&t){const t=c.rc(4),e=c.gc(2);c.Bb(3),c.lc("ngModel",e.copyProfile.secondaryContact),c.Bb(2),c.lc("ngIf",t.invalid&&t.touched)}}function K(t,e){if(1&t&&(c.Ub(0,"p",25),c.Cc(1),c.Tb()),2&t){const t=c.gc(2);c.Bb(1),c.Dc(t.errorMsg)}}function j(t,e){1&t&&c.Pb(0,"span",26)}function V(t,e){if(1&t){const t=c.Vb();c.Ub(0,"div",10),c.Ub(1,"h3",1),c.Cc(2),c.Tb(),c.Ub(3,"form",11,12),c.cc("submit",(function(){return c.tc(t),c.gc().submit()})),c.Ac(5,E,6,2,"mat-form-field",13),c.Ac(6,S,6,2,"mat-form-field",13),c.Ac(7,D,6,2,"mat-form-field",13),c.Ac(8,q,6,2,"mat-form-field",13),c.Ac(9,K,2,1,"p",14),c.Ub(10,"button",15),c.Ac(11,j,1,0,"span",16),c.Ub(12,"span"),c.Cc(13),c.Tb(),c.Tb(),c.Tb(),c.Tb()}if(2&t){const t=c.rc(4),e=c.gc();c.Bb(2),c.Ec("Edit ",e.editKey,""),c.Bb(3),c.lc("ngIf","fullname"===e.editKey),c.Bb(1),c.lc("ngIf","email"===e.editKey),c.Bb(1),c.lc("ngIf","address"===e.editKey),c.Bb(1),c.lc("ngIf","secondaryContact"===e.editKey),c.Bb(1),c.lc("ngIf",e.errorMsg),c.Bb(1),c.lc("disabled",t.invalid||t.untouched||e.isLoading),c.Bb(1),c.lc("ngIf",e.isLoading),c.Bb(2),c.Ec("Update ",e.editKey,"")}}const F=[{path:"",component:(()=>{class t{constructor(t,e,n,i){this._userService=t,this._dialog=e,this._selfService=n,this._snackBar=i,this.isLoading=!1}ngOnInit(){this.profile=this._userService.user,this.copyProfile=JSON.parse(JSON.stringify(this.profile))}ngOnDestroy(){}getValue(t,e){return""!==t?t:e}onEdit(t){this.editKey=t,this._dialog.open(this.editDialog,{width:"380px",height:"auto",autoFocus:!1}).afterClosed().pipe(o.a.takeUntil(this)).subscribe(()=>{}),setTimeout(()=>{document.querySelector(".editDialog").querySelectorAll("input")[0].focus()},100)}submit(){this.isLoading=!1,this.errorMsg=null,this._selfService.update(this.copyProfile).pipe(o.a.takeUntil(this)).subscribe(t=>{this.isLoading=!1,this._snackBar.open(r.b.PROFILE_UPDATE,null,{duration:2e3}),this._dialog.closeAll(),this.profile=t,this._userService.setUser(this.profile)},()=>{this.isLoading=!1,this.errorMsg=r.a.COMMON})}}return t.\u0275fac=function(e){return new(e||t)(c.Ob(l.a),c.Ob(s.b),c.Ob(m),c.Ob(p.a))},t.\u0275cmp=c.Ib({type:t,selectors:[["app-profile"]],viewQuery:function(t,e){var n;1&t&&c.Ic(B,!0),2&t&&c.qc(n=c.dc())&&(e.editDialog=n.first)},decls:31,vars:6,consts:[["ngClass.lt-sm","sm",1,"mat-elevation-z2","bg-white","page-content"],[1,"p-2","bor-bt"],["novalidate","",1,"d-block","m-3","edit-form"],[1,"w-100","mb-3","text-center"],["size","big",3,"gender","id","avatar"],[1,"column",2,"margin","0 auto","background-color","var(--header-color)","border","none","color","var(--white)"],[3,"click"],["fxLayout","row wrap","fxLayoutAlign","space-around start","fxLayout.lt-sm","column","fxLayoutAlign.lt-sm","space-around center","fxLayoutGap.gt-xs","20"],[1,"column","text-center","mt-2"],["editDialog",""],[1,"editDialog"],["novalidate","",1,"mt-2","text-center",3,"submit"],["profileForm","ngForm"],[4,"ngIf"],["class","text-danger m-3",4,"ngIf"],["mat-raised-button","","color","primary",1,"mt-2",3,"disabled"],["class","spinner-grow spinner-grow-sm","role","status","aria-hidden","true",4,"ngIf"],["matInput","","required","","minlength","1","maxlength","255","name","fullname","pattern","[A-Za-z ]{1,255}",3,"ngModel","ngModelChange"],["fullname","ngModel"],["matInput","","required","","minlength","1","maxlength","255","name","email","pattern","[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}",3,"ngModel","ngModelChange"],["email","ngModel"],["matInput","","required","","minlength","1","maxlength","255","name","address","pattern","[A-Za-z 1-9,.]{1,255}",3,"ngModel","ngModelChange"],["address","ngModel"],["matInput","","required","","minlength","1","maxlength","255","name","secondaryContact","pattern","[6-9]{1}[0-9]{9}",3,"ngModel","ngModelChange"],["secondaryContact","ngModel"],[1,"text-danger","m-3"],["role","status","aria-hidden","true",1,"spinner-grow","spinner-grow-sm"]],template:function(t,e){1&t&&(c.Ub(0,"div",0),c.Ub(1,"h3",1),c.Cc(2,"My Profile"),c.Tb(),c.Ub(3,"form",2),c.Ub(4,"div",3),c.Pb(5,"profile-avatar",4),c.Ub(6,"div",5),c.Ub(7,"label"),c.Cc(8),c.Tb(),c.Ub(9,"a",6),c.cc("click",(function(){return e.onEdit("fullname")})),c.Ub(10,"mat-icon"),c.Cc(11,"edit"),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Ub(12,"div",7),c.Ub(13,"div",8),c.Ub(14,"h3"),c.Cc(15,"Email "),c.Ub(16,"a",6),c.cc("click",(function(){return e.onEdit("email")})),c.Ub(17,"mat-icon"),c.Cc(18,"edit"),c.Tb(),c.Tb(),c.Tb(),c.Ub(19,"div"),c.Cc(20),c.Tb(),c.Tb(),c.Ub(21,"div",8),c.Ub(22,"h3"),c.Cc(23,"Secondary Contact No "),c.Ub(24,"a",6),c.cc("click",(function(){return e.onEdit("secondaryContact")})),c.Ub(25,"mat-icon"),c.Cc(26,"edit"),c.Tb(),c.Tb(),c.Tb(),c.Ub(27,"div"),c.Cc(28),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Ac(29,V,14,9,"ng-template",null,9,c.Bc),c.Tb()),2&t&&(c.Bb(5),c.lc("gender",e.profile.gender)("id",e.profile.id)("avatar",e.profile.avatar),c.Bb(3),c.Dc(e.profile.fullname||"No Name Given"),c.Bb(12),c.Dc(e.getValue(e.profile.email,"No email")),c.Bb(8),c.Dc(e.profile.secondaryContact||"No secondary contact"))},directives:[f.a,u.q,u.k,u.l,I,_.a,w.c,w.b,w.d,h.l,C.b,M.c,M.f,A.a,u.b,u.p,u.f,u.e,u.n,u.j,u.m,M.b],styles:["[_nghost-%COMP%]{display:block}.edit-form[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]{width:320px;border:1px solid #ccc;padding:10px}.edit-form[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;background-color:var(--header-color);color:var(--white);font-size:14px;position:relative}.edit-form[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{position:absolute;top:0;right:10px}.edit-form[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;line-height:26px;vertical-align:middle}.edit-form[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:14px!important;line-height:26px;vertical-align:middle;margin-top:-5px}.edit-form[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-block;line-height:26px;margin:0;vertical-align:middle}.sm[_ngcontent-%COMP%]   .edit-form[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block}.sm[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]{margin-top:20px}"]}),t})()}];let G=(()=>{class t{}return t.\u0275mod=c.Mb({type:t}),t.\u0275inj=c.Lb({factory:function(e){return new(e||t)},imports:[[i.e.forChild(F)],i.e]}),t})(),J=(()=>{class t{}return t.\u0275mod=c.Mb({type:t}),t.\u0275inj=c.Lb({factory:function(e){return new(e||t)},imports:[[a.a,G]]}),t})()}}]);